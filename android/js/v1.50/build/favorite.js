function favorWin(e,n){document.getElementById("win").className=e,document.getElementById("win").innerText=n,clearInterval(t)}function cancelActive(){var e=document.querySelectorAll(".tv-title .icon-download")[0],t=document.querySelectorAll(".tv-title .icon-share")[0];t.className=="icon-share active"&&(t.className="icon-share"),e&&e.className=="icon-download active"&&(e.className="icon-download")}var favor=document.querySelector("#favor"),class_name=favor.className,seriesId="$!detail.seriesId",objectId="$!detail.seriesId",resType="series",favoriteId="$!favorite.id",favoriteId=favoriteId==""?0:favoriteId,v="$!v",t,isclick=!0;isclick&&favor.addEventListener("click",function(){isclick=!1,class_name==="icon-favor "?$.ajax({url:"/android/favorite/add/?v="+v+"&objectId="+objectId+"&resType="+resType+"&userId=$!userId",dataType:"json",timeout:3e3,success:function(e,n,r){if(e.status==="ok")try{favor.className="icon-favor active ",class_name=favor.className,favoriteId=e.favoriteId,favorWin("win-active","收藏成功"),t=setInterval(function(){favorWin("","收藏成功")},3e3)}catch(i){throw i}},error:function(e,n,r){favorWin("win-active","网络连接失败"),t=setInterval(function(){favorWin("","网络连接失败")},3e3)},complete:function(e){isclick=!0}}):$.ajax({url:"/android/favorite/delete/?v="+v+"&ids="+favoriteId+"&userId=$!userId",dataType:"json",timeout:3e3,success:function(e,n,r){if(e.status==="ok")try{favor.className="icon-favor ",class_name=favor.className,favorWin("win-active","取消收藏"),t=setInterval(function(){favorWin("","取消收藏")},3e3)}catch(i){throw i}},error:function(e,n,r){favorWin("win-active","网络连接失败"),t=setInterval(function(){favorWin("","网络连接失败")},3e3)},complete:function(e){isclick=!0}})},!1);