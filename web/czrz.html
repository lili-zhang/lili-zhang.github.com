<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="format-detection" content="email=no"/>
    <title>车主认证－长途拼车</title>
    <link href="css/common.css" rel="stylesheet" type="text/css"/>
    <link href="css/user.css" rel="stylesheet" type="text/css"/>
</head>
<body>
    <header>
        <a class="go-back" href="javascript:history.go(-1);">返回</a>
        车主认证
    </header>
    <div class="top">
        <div class="head">
            <a href="#"><img src="images/owner.jpg"/></a>
        </div>
        <div class="items">
            <p class="name"><a href="#">张先生</a></p>
            <p><a href="#">15045897855</a></p>
        </div>
    </div>
    <div class="container">
        <div class="photo-item">
            <strong>身份证:</strong>
            <a href="javascript:;" class="file">
                <input type="file" name="shenfenzheng" id="shenfenzheng" onchange="previewImage(this,0)"/>
            </a>
            <button type="button">上传</button>
        </div>
        <div class="photo-item">
            <strong>行驶证:</strong>
            <a href="javascript:;" class="file">
                <input type="file" name="xingjiazheng" id="xingjiazheng" onchange="previewImage(this,1)"/>
            </a>
            <button type="button">上传</button>
        </div>
        <div class="photo-item">
            <strong>驾照:</strong>
            <a href="javascript:;" class="file">
                <input type="file" name="jiazhao" id="jiazhao" onchange="previewImage(this,2)"/>
            </a>
            <button type="button">上传</button>
        </div>
    </div>
    <nav>
        <a class="icon-home" href="home.html">
            <strong>首页</strong>
        </a>
        <a class="icon-release" href="#">
            <strong>发布</strong>
        </a>
        <a class="icon-travel" href="ckxc.html">
            <strong>行程</strong>
        </a>
        <a class="icon-friends" href="#">
            <strong>好友</strong>
        </a>
        <a class="icon-personal" href="grzx.html">
            <strong>个人</strong>
        </a>
    </nav>
    <script src="js/zepto.js"></script>
    <script>
        //图片上传预览
        function previewImage(file,index)
        {
            var MAXWIDTH  = 60;
            var MAXHEIGHT = 60;

            if (file.files && file.files[0])
            {
                $('.file').eq(index).append("<img class='imghead'/>");
                var img = document.querySelectorAll('.imghead')[index];
                img.onload = function(){
                    var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
                    img.width  =  rect.width;
                    img.height =  rect.height;
                };
                var reader = new FileReader();
                reader.onload = function(evt){
                    img.src = evt.target.result;
                    $('.file').eq(index).css('background','none');
                };
                reader.readAsDataURL(file.files[0]);
            }
        }
        function clacImgZoomParam( maxWidth, maxHeight, width, height ){
            var param = {top:0, left:0, width:width, height:height};
            if( width>maxWidth || height>maxHeight )
            {
                rateWidth = width / maxWidth;
                rateHeight = height / maxHeight;

                if( rateWidth > rateHeight )
                {
                    param.width =  maxWidth;
                    param.height = Math.round(height / rateWidth);
                }else
                {
                    param.width = Math.round(width / rateHeight);
                    param.height = maxHeight;
                }
            }

            param.left = Math.round((maxWidth - param.width) / 2);
            param.top = Math.round((maxHeight - param.height) / 2);
            return param;
        }
    </script>
</body>
</html>